<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Offers â€” LOS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <style>
        :root {
            --purple: #6c3ec9;
            --purple-light: #ede9fb;
        }

        body {
            background: #f5f6fa;
            font-family: 'Segoe UI', sans-serif;
        }

        /* â”€â”€â”€ Layout â”€â”€â”€ */
        .page-wrap {
            display: flex;
            min-height: 100vh;
        }

        /* â”€â”€â”€ Sidebar â”€â”€â”€ */
        .sidebar {
            width: 220px;
            flex-shrink: 0;
            background: #fff;
            border-right: 1px solid #e8e8e8;
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .sidebar-logo {
            padding: 0 1.5rem 2rem;
            font-weight: 800;
            font-size: 1.15rem;
            color: var(--purple);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-logo-icon {
            width: 28px;
            height: 28px;
            background: var(--purple);
            border-radius: 7px;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.72rem;
        }

        .sidebar-step {
            position: relative;
            display: flex;
            align-items: center;
            gap: 0.85rem;
            padding: 0.8rem 1.25rem;
            color: #adb5bd;
            font-size: 0.88rem;
            font-weight: 500;
        }

        .sidebar-step::before {
            content: '';
            position: absolute;
            left: 23px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e9ecef;
            z-index: 0;
        }

        .sidebar-step:first-of-type::before {
            top: 50%;
        }

        .sidebar-step:last-of-type::before {
            bottom: 50%;
        }

        .step-dot {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: #e9ecef;
            color: #fff;
            font-size: 0.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            z-index: 1;
        }

        .sidebar-step.done {
            color: #212529;
        }

        .sidebar-step.done .step-dot,
        .sidebar-step.active .step-dot {
            background: var(--purple);
        }

        .sidebar-step.done::before,
        .sidebar-step.active::before {
            background: var(--purple);
        }

        .sidebar-step.active {
            color: #212529;
            font-weight: 600;
        }

        /* â”€â”€â”€ Main â”€â”€â”€ */
        .main-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .topbar {
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
            padding: 0.6rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 20;
        }

        .topbar-brand {
            font-size: 1.15rem;
            font-weight: 800;
            color: var(--purple);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .topbar-brand-icon {
            width: 28px;
            height: 28px;
            background: var(--purple);
            border-radius: 6px;
            color: #fff;
            font-size: 0.72rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .topbar-search {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 0.38rem 0.85rem;
            font-size: 0.85rem;
            background: #f8f8f8;
            outline: none;
            width: 180px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            background: var(--purple-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--purple);
            font-weight: 700;
            font-size: 0.8rem;
        }

        .content {
            padding: 2rem 2rem 4rem;
        }

        .page-header {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            margin-bottom: 1.5rem;
        }

        .back-btn {
            color: #555;
            font-size: 1rem;
            cursor: pointer;
            text-decoration: none;
        }

        .back-btn:hover {
            color: var(--purple);
        }

        .page-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #222;
        }

        /* â”€â”€â”€ Offers Section â”€â”€â”€ */
        .section-card {
            background: #fff;
            border-radius: 14px;
            padding: 1.5rem 1.75rem;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        }

        .section-heading {
            color: var(--purple);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .offers-subtitle-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .offers-title-text {
            font-weight: 700;
            font-size: 1rem;
            color: #222;
        }

        .compare-btn {
            background: var(--purple);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0.45rem 1.25rem;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            transition: opacity 0.2s;
            white-space: nowrap;
        }

        .compare-btn:disabled {
            opacity: 0.35;
            cursor: not-allowed;
        }

        .compare-btn:not(:disabled):hover {
            opacity: 0.85;
        }

        .offers-desc {
            font-size: 0.82rem;
            color: #888;
            margin-bottom: 1.25rem;
            line-height: 1.6;
        }

        /* â”€â”€â”€ Cards Grid â”€â”€â”€ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.25rem;
        }

        @media (max-width: 1200px) {
            .cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 700px) {
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        /* â”€â”€â”€ Offer Card â”€â”€â”€ */
        .offer-card {
            border-radius: 14px;
            overflow: hidden;
            border: 2px solid transparent;
            transition: border-color 0.15s, box-shadow 0.15s;
            cursor: default;
        }

        .offer-card.checked {
            border-color: var(--purple);
        }

        .offer-card:hover {
            box-shadow: 0 6px 20px rgba(108, 62, 201, 0.13);
        }

        .card-top {
            position: relative;
            padding: 1.1rem 1.1rem 1.3rem;
        }

        /* Each bank gets its own gradient */
        .card-top.grad-hdfc {
            background: linear-gradient(135deg, #3d1f8b 0%, #7c4fd5 100%);
        }

        .card-top.grad-idfc {
            background: linear-gradient(135deg, #8b1f4f 0%, #d54f7c 100%);
        }

        .card-top.grad-icici {
            background: linear-gradient(135deg, #8b5e1f 0%, #d5a04f 100%);
        }

        .card-top.grad-sbi {
            background: linear-gradient(135deg, #1a5276 0%, #2e86c1 100%);
        }

        .card-amount {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 0.15rem;
        }

        .card-rate {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.8rem;
            font-weight: 500;
        }

        .card-terms-note {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.65rem;
            margin-top: 0.5rem;
        }

        .card-checkbox-wrap {
            position: absolute;
            top: 0.8rem;
            right: 0.8rem;
        }

        .card-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--purple);
            border: 2px solid #fff;
        }

        .card-body {
            background: #fff;
            padding: 1rem 1.1rem 1.25rem;
        }

        .bank-logo-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.65rem;
        }

        .bank-logo-box {
            padding: 0.3rem 0.6rem;
            border: 1px solid #eee;
            border-radius: 6px;
            font-weight: 800;
            font-size: 0.78rem;
            white-space: nowrap;
        }

        .bank-logo-box.hdfc {
            background: #003c64;
            color: #fff;
        }

        .bank-logo-box.idfc {
            background: #801436;
            color: #fff;
        }

        .bank-logo-box.icici {
            background: #ea6b2d;
            color: #fff;
        }

        .bank-logo-box.sbi {
            background: #2046a1;
            color: #fff;
        }

        .recommended-badge {
            background: #fff7d6;
            color: #b8860b;
            border: 1px solid #ffe08a;
            border-radius: 4px;
            font-size: 0.6rem;
            font-weight: 700;
            padding: 0.1rem 0.45rem;
        }

        .payment-terms-title {
            font-size: 0.78rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .payment-term-item {
            font-size: 0.75rem;
            color: #555;
            margin-bottom: 0.3rem;
            display: flex;
            gap: 0.4rem;
        }

        .payment-term-item::before {
            content: 'â€¢';
            color: var(--purple);
            font-weight: 700;
        }

        .card-view-btn {
            display: block;
            width: 100%;
            border: 1.5px solid #ddd;
            background: #fff;
            color: #444;
            border-radius: 8px;
            padding: 0.5rem;
            font-size: 0.82rem;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            margin-top: 0.85rem;
            transition: border-color 0.15s, color 0.15s;
        }

        .card-view-btn:hover {
            border-color: var(--purple);
            color: var(--purple);
        }

        /* â”€â”€â”€ Success Screen â”€â”€â”€ */
        #applySuccessScreen {
            display: none;
            text-align: center;
            padding: 4rem 2rem;
        }

        .success-icon-wrap {
            width: 88px;
            height: 88px;
            background: var(--purple-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .success-icon-wrap i {
            font-size: 2.4rem;
            color: var(--purple);
        }

        .success-ref {
            background: var(--purple-light);
            color: var(--purple);
            font-weight: 700;
            border-radius: 8px;
            padding: 0.4rem 1.25rem;
            display: inline-block;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }

        /* â”€â”€â”€ Compare Modal â”€â”€â”€ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.48);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-overlay.open {
            display: flex;
        }

        .modal-box {
            background: #fff;
            border-radius: 16px;
            width: 100%;
            max-width: 820px;
            padding: 2rem;
            position: relative;
            max-height: 88vh;
            overflow-y: auto;
            animation: popIn 0.2s ease-out;
        }

        @keyframes popIn {
            from {
                transform: scale(0.93);
                opacity: 0
            }

            to {
                transform: scale(1);
                opacity: 1
            }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #eee;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-title {
            color: var(--purple);
            font-weight: 700;
            font-size: 1.05rem;
            margin-bottom: 1.25rem;
        }

        .modal-filter-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
            flex-wrap: wrap;
        }

        .filter-label {
            font-size: 0.82rem;
            font-weight: 600;
            color: #444;
            white-space: nowrap;
        }

        .filter-input {
            border: 1.5px solid #ddd;
            border-radius: 8px;
            padding: 0.45rem 0.85rem;
            font-size: 0.85rem;
            outline: none;
            width: 160px;
        }

        .filter-input:focus {
            border-color: var(--purple);
        }

        .filter-slider {
            accent-color: var(--purple);
            width: 180px;
        }

        .filter-count {
            font-size: 0.82rem;
            font-weight: 700;
            color: var(--purple);
            min-width: 28px;
            text-align: center;
        }

        .filter-search-btn {
            background: var(--purple);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0.48rem 1.25rem;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
        }

        .filter-search-btn:hover {
            opacity: 0.88;
        }

        .compare-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.84rem;
        }

        .compare-table th {
            background: #f8f8f8;
            font-weight: 700;
            color: #555;
            padding: 0.65rem 1rem;
            border-bottom: 1px solid #eee;
            text-align: left;
        }

        .compare-table td {
            padding: 0.85rem 1rem;
            border-bottom: 1px solid #f3f3f3;
            vertical-align: middle;
        }

        .compare-table tr:last-child td {
            border-bottom: none;
        }

        .tcc-info {
            color: #aaa;
            font-size: 0.72rem;
            cursor: help;
        }

        .cmp-view-btn {
            border: 1.5px solid var(--purple);
            color: var(--purple);
            background: none;
            border-radius: 7px;
            padding: 0.35rem 0.85rem;
            font-size: 0.78rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .cmp-view-btn:hover {
            background: var(--purple-light);
        }

        .cmp-apply-btn {
            background: var(--purple);
            color: #fff;
            border: none;
            border-radius: 7px;
            padding: 0.35rem 0.85rem;
            font-size: 0.78rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .cmp-apply-btn:hover {
            opacity: 0.88;
        }

        .rec-tag {
            background: #fff7d6;
            color: #b8860b;
            border: 1px solid #ffe08a;
            border-radius: 4px;
            font-size: 0.6rem;
            font-weight: 700;
            padding: 0.1rem 0.45rem;
            margin-left: 0.35rem;
            vertical-align: middle;
        }
    </style>
</head>

<body>

    <div class="page-wrap">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon"><i class="fas fa-home"></i></div> LOS
            </div>
            <div class="sidebar-step done">
                <div class="step-dot"><i class="fas fa-check" style="font-size:0.65rem;"></i></div> Application
            </div>
            <div class="sidebar-step done">
                <div class="step-dot"><i class="fas fa-check" style="font-size:0.65rem;"></i></div> Documents Uploads
            </div>
            <div class="sidebar-step done">
                <div class="step-dot"><i class="fas fa-check" style="font-size:0.65rem;"></i></div> Vehicle Details
            </div>
            <div class="sidebar-step done">
                <div class="step-dot"><i class="fas fa-check" style="font-size:0.65rem;"></i></div> Loan Details
            </div>
            <div class="sidebar-step active">
                <div class="step-dot">5</div> Check Offers &amp; Apply
            </div>
        </div>

        <!-- Main -->
        <div class="main-area">
            <!-- Topbar -->
            <div class="topbar">
                <div class="topbar-brand">
                    <div class="topbar-brand-icon"><i class="fas fa-home"></i></div> LOS
                </div>
                <div class="d-flex align-items-center gap-3">
                    <input class="topbar-search" placeholder="ðŸ”  Search">
                    <i class="fas fa-bell text-muted"></i>
                    <span class="badge bg-danger rounded-pill" style="margin-left:-0.75rem;font-size:0.58rem;">3</span>
                    <img src="https://ui-avatars.com/api/?name=Satish+L&background=f0ad4e&color=fff"
                        class="rounded-circle" width="32" alt="avatar">
                    <span style="font-size:0.85rem;font-weight:600;color:#333;">Satish L</span>
                </div>
            </div>

            <div class="content">
                <div class="page-header">
                    <a href="javascript:history.back()" class="back-btn"><i class="fas fa-arrow-left"></i></a>
                    <span class="page-title">Check offers</span>
                </div>

                <!-- â•â•â•â•â•â• OFFERS VIEW â•â•â•â•â•â• -->
                <div id="offersView">
                    <div class="section-card">
                        <div class="section-heading">Loan Offers</div>

                        <div class="offers-subtitle-row">
                            <div class="offers-title-text">Loan Offers for you</div>
                            <button class="compare-btn" id="compareBtn" disabled
                                onclick="openCompare()">Compare</button>
                        </div>

                        <p class="offers-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed justo erat,
                            pulvinar in neque vitae, dapibus dapibus magna. Integer sit amet nulla eget tortor commodo
                            bibendum eu quis nulla.</p>

                        <div class="cards-grid" id="cardsGrid">

                            <!-- Card 1: HDFC -->
                            <div class="offer-card" id="card0">
                                <div class="card-top grad-hdfc">
                                    <div class="card-checkbox-wrap">
                                        <input type="checkbox" class="card-checkbox" data-idx="0" onchange="onCheck()">
                                    </div>
                                    <div class="card-amount">â‚¹ 5,00,000</div>
                                    <div class="card-rate">8.5% Interest Rate</div>
                                    <div class="card-terms-note">Terms &amp; Conditions apply</div>
                                </div>
                                <div class="card-body">
                                    <div class="bank-logo-row">
                                        <div class="bank-logo-box hdfc">âŠ•HDFC Bank</div>
                                        <span class="recommended-badge">Recommended</span>
                                    </div>
                                    <div class="payment-terms-title">Payment Terms</div>
                                    <div class="payment-term-item">8.5% Annual Interest Rate</div>
                                    <div class="payment-term-item">â‚¹ 1000 Processing fees</div>
                                    <div class="payment-term-item">Additional Insurance Charges</div>
                                    <div class="payment-term-item">Monthly EMI â‚¹ 17,200/-</div>
                                    <button class="card-view-btn" onclick="viewCard(0)">View Details</button>
                                </div>
                            </div>

                            <!-- Card 2: IDFC -->
                            <div class="offer-card" id="card1">
                                <div class="card-top grad-idfc">
                                    <div class="card-checkbox-wrap">
                                        <input type="checkbox" class="card-checkbox" data-idx="1" onchange="onCheck()">
                                    </div>
                                    <div class="card-amount">â‚¹ 5,00,000</div>
                                    <div class="card-rate">8.6% Interest Rate</div>
                                    <div class="card-terms-note">Terms &amp; Conditions apply</div>
                                </div>
                                <div class="card-body">
                                    <div class="bank-logo-row">
                                        <div class="bank-logo-box idfc">IDFC FIRST Bank</div>
                                    </div>
                                    <div class="payment-terms-title">Payment Terms</div>
                                    <div class="payment-term-item">8.6% Annual Interest Rate</div>
                                    <div class="payment-term-item">â‚¹ 1100 Processing fees</div>
                                    <div class="payment-term-item">Additional Insurance Charges</div>
                                    <div class="payment-term-item">Monthly EMI â‚¹ 17,300/-</div>
                                    <button class="card-view-btn" onclick="viewCard(1)">View Details</button>
                                </div>
                            </div>

                            <!-- Card 3: ICICI -->
                            <div class="offer-card" id="card2">
                                <div class="card-top grad-icici">
                                    <div class="card-checkbox-wrap">
                                        <input type="checkbox" class="card-checkbox" data-idx="2" onchange="onCheck()">
                                    </div>
                                    <div class="card-amount">â‚¹ 5,00,000</div>
                                    <div class="card-rate">8.7% Interest Rate</div>
                                    <div class="card-terms-note">Terms &amp; Conditions apply</div>
                                </div>
                                <div class="card-body">
                                    <div class="bank-logo-row">
                                        <div class="bank-logo-box icici">@ICICI Bank</div>
                                    </div>
                                    <div class="payment-terms-title">Payment Terms</div>
                                    <div class="payment-term-item">8.7% Annual Interest Rate</div>
                                    <div class="payment-term-item">â‚¹ 1100 Processing fees</div>
                                    <div class="payment-term-item">Additional Insurance Charges</div>
                                    <div class="payment-term-item">Monthly EMI â‚¹ 17,400/-</div>
                                    <button class="card-view-btn" onclick="viewCard(2)">View Details</button>
                                </div>
                            </div>

                            <!-- Card 4: SBI -->
                            <div class="offer-card" id="card3">
                                <div class="card-top grad-sbi">
                                    <div class="card-checkbox-wrap">
                                        <input type="checkbox" class="card-checkbox" data-idx="3" onchange="onCheck()">
                                    </div>
                                    <div class="card-amount">â‚¹ 5,00,000</div>
                                    <div class="card-rate">8.8% Interest Rate</div>
                                    <div class="card-terms-note">Terms &amp; Conditions apply</div>
                                </div>
                                <div class="card-body">
                                    <div class="bank-logo-row">
                                        <div class="bank-logo-box sbi">â—Ž SBI</div>
                                    </div>
                                    <div class="payment-terms-title">Payment Terms</div>
                                    <div class="payment-term-item">8.8% Annual Interest Rate</div>
                                    <div class="payment-term-item">â‚¹ 1200 Processing fees</div>
                                    <div class="payment-term-item">Additional Insurance Charges</div>
                                    <div class="payment-term-item">Monthly EMI â‚¹ 17,450/-</div>
                                    <button class="card-view-btn" onclick="viewCard(3)">View Details</button>
                                </div>
                            </div>

                        </div><!-- /cards-grid -->
                    </div><!-- /section-card -->
                </div><!-- /offersView -->

                <!-- â•â•â•â•â•â• SUCCESS SCREEN â•â•â•â•â•â• -->
                <div id="applySuccessScreen">
                    <div class="section-card" style="max-width:540px;margin:0 auto;">
                        <div class="success-icon-wrap">
                            <i class="fas fa-check"></i>
                        </div>
                        <h4 class="fw-bold mb-2">Loan Applied Successfully!</h4>
                        <p class="text-muted mb-3" id="successBankMsg">Your application to <strong
                                id="successBankName"></strong> has been submitted. You will receive a response within
                            2â€“3 business days.</p>
                        <div class="success-ref" id="successRef">â€”</div>
                        <div class="d-flex gap-3 justify-content-center mt-2">
                            <button class="btn btn-outline-secondary px-4"
                                onclick="window.location.href='orders.html'">Back to AutoHub</button>
                            <button class="btn btn-primary px-4" style="background:var(--purple);border:none;"
                                onclick="window.location.href='loan-status.html'">View Application Status <i
                                    class="fas fa-arrow-right ms-1"></i></button>
                        </div>
                    </div>
                </div>

            </div><!-- /content -->
        </div><!-- /main-area -->
    </div><!-- /page-wrap -->

    <!-- â•â•â•â•â•â• COMPARE MODAL â•â•â•â•â•â• -->
    <div class="modal-overlay" id="compareModal">
        <div class="modal-box">
            <button class="modal-close" onclick="closeCompare()">âœ•</button>
            <div class="modal-title">Compare Offers</div>
            <div class="modal-filter-row">
                <span class="filter-label">Loan Amount â‚¹</span>
                <input type="number" class="filter-input" id="filterAmount" placeholder="Enter Amount" value="500000">
                <span class="filter-label">Tenure (Months)</span>
                <input type="range" class="filter-slider" id="tenureSlider" min="6" max="60" value="24"
                    oninput="document.getElementById('tenureCount').textContent=this.value">
                <span class="filter-count" id="tenureCount">24</span>
                <button class="filter-search-btn" onclick="runSearch()">Search</button>
            </div>
            <table class="compare-table" id="compareTable">
                <thead>
                    <tr>
                        <th>Bank Name</th>
                        <th>Interest p.a.</th>
                        <th>EMI/Month</th>
                        <th>Total Payable</th>
                        <th>TCC <span class="tcc-info" title="Total Cost of Credit = Interest + Fees">â“˜</span></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="compareBody"></tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/store.js"></script>
    <script>
        // â”€â”€ Bank Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const BANKS = [
            { id: 0, name: 'HDFC Bank', rate: 8.50, fee: 1000, recommended: true },
            { id: 1, name: 'IDFC FIRST Bank', rate: 8.60, fee: 1100, recommended: false },
            { id: 2, name: 'ICICI Bank', rate: 8.70, fee: 1100, recommended: false },
            { id: 3, name: 'SBI', rate: 8.80, fee: 1200, recommended: false },
        ];

        const checkedSet = new Set();

        // â”€â”€ Checkbox logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function onCheck() {
            checkedSet.clear();
            document.querySelectorAll('.card-checkbox').forEach(cb => {
                const idx = parseInt(cb.dataset.idx);
                if (cb.checked) {
                    checkedSet.add(idx);
                    document.getElementById('card' + idx).classList.add('checked');
                } else {
                    document.getElementById('card' + idx).classList.remove('checked');
                }
            });

            const btn = document.getElementById('compareBtn');
            const cnt = checkedSet.size;
            btn.disabled = cnt < 2;
            btn.textContent = cnt >= 2 ? `Compare (${cnt})` : 'Compare';
        }

        // â”€â”€ View Details (highlight card) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function viewCard(idx) {
            document.querySelectorAll('.offer-card').forEach(c => c.style.boxShadow = '');
            const card = document.getElementById('card' + idx);
            card.style.boxShadow = '0 0 0 3px var(--purple), 0 8px 24px rgba(108,62,201,0.25)';
            card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // â”€â”€ EMI Calculator â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function calcEMI(principal, annualRate, months) {
            const r = annualRate / 100 / 12;
            return Math.round(principal * r * Math.pow(1 + r, months) / (Math.pow(1 + r, months) - 1));
        }

        function fmt(n) { return 'â‚¹ ' + n.toLocaleString('en-IN') + '/-'; }

        // â”€â”€ Compare Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function openCompare() {
            buildCompareTable();
            document.getElementById('compareModal').classList.add('open');
        }
        function closeCompare() {
            document.getElementById('compareModal').classList.remove('open');
        }
        document.getElementById('compareModal').addEventListener('click', function (e) {
            if (e.target === this) closeCompare();
        });

        function runSearch() { buildCompareTable(); }

        function buildCompareTable() {
            const amount = Number(document.getElementById('filterAmount').value) || 500000;
            const tenure = Number(document.getElementById('tenureSlider').value);
            const indices = [...checkedSet];
            const tbody = document.getElementById('compareBody');

            tbody.innerHTML = indices.map(idx => {
                const b = BANKS[idx];
                const emi = calcEMI(amount, b.rate, tenure);
                const total = emi * tenure;
                const interest = total - amount;
                const tcc = interest + b.fee;
                const recTag = b.recommended ? '<span class="rec-tag">Recommended</span>' : '';
                return `<tr>
            <td>${b.name}${recTag}</td>
            <td>${b.rate.toFixed(2)}%</td>
            <td>${fmt(emi)}</td>
            <td>${fmt(total)}</td>
            <td>${fmt(tcc)}</td>
            <td><button class="cmp-view-btn" onclick="viewCard(${idx});closeCompare()">View Details</button></td>
            <td><button class="cmp-apply-btn" onclick="applyOffer(${idx})">Apply</button></td>
        </tr>`;
            }).join('');
        }

        // â”€â”€ Apply â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function applyOffer(idx) {
            closeCompare();
            const bank = BANKS[idx];
            const refId = 'LOS/' + bank.name.split(' ')[0].toUpperCase() + '/2025/' + (Math.floor(Math.random() * 90000) + 10000);

            // Save to localStorage
            try {
                const apps = JSON.parse(localStorage.getItem('autohub_loan_apps') || '[]');
                apps.push({ bank: bank.name, ref: refId, date: new Date().toISOString(), status: 'Submitted' });
                localStorage.setItem('autohub_loan_apps', JSON.stringify(apps));
            } catch (e) { }

            document.getElementById('offersView').style.display = 'none';
            const ss = document.getElementById('applySuccessScreen');
            ss.style.display = 'block';
            document.getElementById('successBankName').textContent = bank.name;
            document.getElementById('successRef').textContent = refId;
        }
    </script>
</body>

</html>