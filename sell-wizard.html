<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sell Wizard | AutoHub Marketplace</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/sell.css">
</head>

<body class="sell-wizard-page">

    <!-- Minimal Navbar -->
    <nav class="navbar wizard-navbar">
        <div class="container-fluid px-4">
            <a class="navbar-brand" href="index.html">AutoHub <span class="text-accent">Marketplace</span></a>
            <div class="d-flex align-items-center gap-3">
                <div class="position-relative">
                    <a class="nav-link" href="cart.html">
                        <i class="fas fa-shopping-cart fa-lg"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                            id="cartCount">0</span>
                    </a>
                </div>
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle d-flex align-items-center gap-2" href="#" id="profileDropdown"
                        role="button" data-bs-toggle="dropdown">
                        <span class="wizard-avatar"><i class="fas fa-user-circle fa-lg"></i></span>
                        <span id="userName">Account</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="orders.html"><i class="fas fa-box me-2 text-muted"></i>My
                                Orders</a></li>
                        <li><a class="dropdown-item" href="my-quotes.html"><i
                                    class="fas fa-file-invoice me-2 text-muted"></i>My Quotations</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item text-danger" href="#" id="logoutBtn"><i
                                    class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="wizard-breadcrumb">
        <div class="container-fluid px-lg-5 px-3">
            <button class="wizard-back-btn" onclick="sellWizard.goBack()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <span id="wizardBreadcrumb" class="wizard-breadcrumb-text">Select Brand</span>
        </div>
    </div>

    <!-- Progress Tabs -->
    <div class="wizard-tabs-wrap">
        <div class="container-fluid px-lg-5 px-3">
            <div class="wizard-tabs" id="wizardTabs">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Step Card -->
    <div class="wizard-body">
        <div class="container-fluid px-lg-5 px-3">
            <div class="wizard-card" id="wizardCard">
                <div class="wizard-card-header">
                    <div id="stepTitle" class="wizard-step-title">Loading‚Ä¶</div>
                    <div id="stepCounter" class="wizard-step-counter">1/11</div>
                </div>

                <!-- Search bar (shown for certain steps) -->
                <div id="wizardSearchBar" style="display:none;" class="wizard-search-bar">
                    <i class="fas fa-search text-muted"></i>
                    <input type="text" id="wizardSearch" class="wizard-search-input" placeholder="Search‚Ä¶"
                        oninput="sellWizard.filterItems(this.value)">
                </div>

                <!-- Items area -->
                <div id="wizardItems" class="wizard-items-area">
                    <!-- Populated by JS -->
                </div>

                <!-- KMs input section (step 8 only) -->
                <div id="kmsSection" class="kms-section" style="display:none;">
                    <div class="kms-input-wrap">
                        <input type="number" id="kmsInput" class="kms-input" placeholder="0" min="0" max="999999"
                            inputmode="numeric">
                        <span class="kms-unit">kms</span>
                    </div>
                </div>

                <!-- Continue button (step 8 only) -->
                <div id="continueWrap" class="wizard-continue-wrap" style="display:none;">
                    <button class="wizard-continue-btn" onclick="sellWizard.continueFromKms()">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Phone Number Panel (slides in from right) -->
    <div class="phone-overlay" id="phoneOverlay" onclick="sellWizard.closePhonePanel()"></div>
    <div class="phone-panel" id="phonePanel">
        <h6 class="phone-panel-heading">Price Estimate</h6>
        <div class="phone-panel-price-blur" id="phonePanelPrice">‚Çπ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
        <p class="phone-panel-desc">
            <i class="fas fa-info-circle text-accent-orange me-1"></i>
            Almost there! Few more steps to get your Price Estimate
        </p>
        <div class="mb-3">
            <label class="form-label fw-semibold small">Enter your number</label>
            <div class="phone-number-row">
                <span class="phone-country-code">+91</span>
                <input type="tel" id="phoneInput" class="phone-number-input" placeholder="10-digit mobile number"
                    maxlength="10" inputmode="numeric">
            </div>
        </div>
        <button class="sell-btn-primary" onclick="sellWizard.submitPhone()">Proceed</button>
        <p class="phone-terms mt-3 mb-0">
            By logging in, you agree to <a href="#">Terms</a> and <a href="#">Privacy Policy</a>.
        </p>
    </div>

    <!-- Price Estimate Full Screen -->
    <div class="price-estimate-screen" id="priceEstimateScreen" style="display:none;">
        <div class="price-estimate-inner">

            <!-- Header -->
            <div class="pe-header">
                <a href="sell.html" class="pe-back-link"><i class="fas fa-arrow-left"></i> Sell Another</a>
                <a href="index.html" class="pe-home-link"><i class="fas fa-home"></i></a>
            </div>

            <!-- Confetti / Success badge -->
            <div class="pe-success-badge">üéâ Price Estimate Ready!</div>

            <!-- Vehicle info -->
            <div class="pe-vehicle-name" id="peVehicleName">TVS Apache 150</div>

            <!-- Price reveal -->
            <div class="pe-price-card">
                <div class="pe-price-label">Estimated Resale Value</div>
                <div class="pe-price-amount" id="pePriceAmount">‚Çπ 65,000</div>
                <div class="pe-price-range" id="pePriceRange">‚Çπ 62,000 ‚Äì ‚Çπ 70,000</div>
            </div>

            <!-- Summary -->
            <div class="pe-summary" id="peSummary">
                <!-- Populated by JS -->
            </div>

            <!-- CTA -->
            <div class="pe-actions">
                <button class="sell-btn-primary w-100" onclick="sellWizard.bookEvaluation()">
                    <i class="fas fa-calendar-check me-2"></i> Book Free Doorstep Evaluation
                </button>
                <a href="sell.html" class="pe-sell-another">‚Üê Sell Another Vehicle</a>
            </div>

            <p class="pe-note">Our expert will contact you within 24 hours to confirm the evaluation appointment.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/store.js"></script>
    <script src="js/sell.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const user = store.getUser();
            if (!user) { window.location.href = 'login.html'; return; }
            document.getElementById('userName').textContent = user.name || 'Account';
            document.getElementById('cartCount').textContent = store.getCart().items.length;
            document.getElementById('logoutBtn').addEventListener('click', (e) => {
                e.preventDefault(); store.logoutUser(); window.location.href = 'login.html';
            });
            sellWizard.init();
        });
    </script>
</body>

</html>